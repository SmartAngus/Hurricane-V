{"ast":null,"code":"var _jsxFileName = \"/Users/majy/work/bici/code/editor-demo/src/features/editor/components/Toolbar.tsx\";\n\n/**\n * @file 画布操作导航\n * @author perkinJ\n */\nimport * as React from \"react\";\nimport { Icon, Tooltip } from \"antd\";\nimport classNames from \"classnames\";\nimport { launchFullscreen, exitFullscreen, isFull } from \"../utils/FullsreenUtils\";\nimport { MIN_SCALE, MAX_SCALE } from \"../constants/defines\";\nimport \"./Toolbar.scss\";\n/** 操作面板，支持全屏、缩放、自适应画布、格式化、显示比例 */\n\nexport class ToolbarProps {\n  constructor() {\n    this.handleShowAll = void 0;\n    this.handleResizeTo = void 0;\n    this.changeScreenScale = void 0;\n    this.screenScale = void 0;\n    this.onSave = void 0;\n    this.onShear = void 0;\n    this.onCopy = void 0;\n    this.onPaste = void 0;\n    this.onDelete = void 0;\n    this.onDragSelect = void 0;\n    this.onLayout = void 0;\n    this.onAdapt = void 0;\n    this.onGroup = void 0;\n    this.onPreview = void 0;\n    this.items = void 0;\n  }\n  /**  */\n\n\n}\nconst Toolbar = React.forwardRef((props, ref) => {\n  const {\n    screenScale,\n    changeScreenScale,\n    handleResizeTo,\n    items,\n    onShear,\n    onCopy,\n    onPaste,\n    onDelete,\n    onDragSelect,\n    onSave,\n    onLayout,\n    onAdapt,\n    onGroup\n  } = props;\n  const scale = String(Math.round(screenScale));\n  /** 是否保存 */\n\n  const isSave = items.includes(\"save\");\n  /** 是否支持全屏 */\n\n  const isFullScreen = items.includes(\"fullscreen\");\n  /** 是否支持缩放 */\n\n  const isZoom = items.includes(\"zoom\");\n  /** 是否支持适应画布 */\n\n  const isAdapt = items.includes(\"adapt\");\n  /** 是否支持格式化 */\n\n  const isFormat = items.includes(\"format\");\n  /** 剪切 */\n\n  const isShear = items.includes(\"shear\");\n  /** 是否支持复制 */\n\n  const isCopy = items.includes(\"copy\");\n  const isPaste = items.includes(\"paste\");\n  const isDelete = items.includes(\"delete\");\n  const isDragSelect = items.includes(\"dragSelect\");\n  const isLayout = items.includes(\"layout\");\n  const isGroup = items.includes(\"group\");\n  /** 当前是否是全屏状态 */\n\n  const fullscreenStatus = isFull();\n  /** 缩放操作 */\n\n  const handleResize = isLager => {\n    let value = screenScale;\n\n    if (isLager) {\n      value = screenScale + 10;\n\n      if (value > MAX_SCALE) {\n        value = MAX_SCALE;\n      }\n    } else {\n      value = screenScale - 10;\n\n      if (value < MIN_SCALE) {\n        value = MIN_SCALE;\n      }\n    }\n\n    handleResizeTo(value / 100);\n    changeScreenScale(value);\n  };\n  /** 处理全屏事件 */\n\n\n  const handleFullScreen = () => {\n    const isfull = isFull();\n\n    if (isfull) {\n      exitFullscreen();\n    } else {\n      launchFullscreen(ref.current);\n    }\n  }; // 渲染按钮\n\n\n  const renderButtons = () => {\n    const fullScreenClassName = classNames({\n      fullscreen: !fullscreenStatus,\n      \"fullscreen-exit\": fullscreenStatus\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, isZoom && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u7F29\\u5C0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"zoom-in\",\n      onClick: handleResize.bind(null, true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u653E\\u5927\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"zoom-out\",\n      onClick: handleResize.bind(null, false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    })))), isSave && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u4FDD\\u5B58\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"save\",\n      onClick: onSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }))), isFullScreen && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u5168\\u5C4F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: fullScreenClassName,\n      onClick: handleFullScreen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }))), isShear && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u526A\\u5207\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"scissor\",\n      onClick: onShear,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }))), isCopy && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u590D\\u5236\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"copy\",\n      onClick: onCopy,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }))), isPaste && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u7C98\\u8D34\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"snippets\",\n      onClick: onPaste,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }))), isDelete && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u5220\\u9664\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"delete\",\n      onClick: onDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }))), isDragSelect && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u5708\\u9009\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"gateway\",\n      onClick: onDragSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }))), isAdapt && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u9002\\u5E94\\u753B\\u5E03\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"border-outer\",\n      onClick: onAdapt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }))), isLayout && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u683C\\u5F0F\\u5316\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"layout\",\n      onClick: onLayout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 15\n      }\n    }))), isGroup && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"toolbar-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: \"\\u6210\\u7EC4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"block\",\n      onClick: onGroup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 15\n      }\n    }))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toolbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toolbar-scale\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }\n  }, scale, \"%\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toolbar-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }\n  }, renderButtons()));\n});\nexport default Toolbar;","map":{"version":3,"sources":["/Users/majy/work/bici/code/editor-demo/src/features/editor/components/Toolbar.tsx"],"names":["React","Icon","Tooltip","classNames","launchFullscreen","exitFullscreen","isFull","MIN_SCALE","MAX_SCALE","ToolbarProps","handleShowAll","handleResizeTo","changeScreenScale","screenScale","onSave","onShear","onCopy","onPaste","onDelete","onDragSelect","onLayout","onAdapt","onGroup","onPreview","items","Toolbar","forwardRef","props","ref","scale","String","Math","round","isSave","includes","isFullScreen","isZoom","isAdapt","isFormat","isShear","isCopy","isPaste","isDelete","isDragSelect","isLayout","isGroup","fullscreenStatus","handleResize","isLager","value","handleFullScreen","isfull","current","renderButtons","fullScreenClassName","fullscreen","bind"],"mappings":"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","sourcesContent":["/**\n * @file 画布操作导航\n * @author perkinJ\n */\n\nimport * as React from \"react\";\nimport { Icon, Tooltip } from \"antd\";\nimport classNames from \"classnames\";\nimport {\n  launchFullscreen,\n  exitFullscreen,\n  isFull\n} from \"../utils/FullsreenUtils\";\nimport { MIN_SCALE, MAX_SCALE } from \"../constants/defines\";\nimport \"./Toolbar.scss\";\n\n/** 操作面板，支持全屏、缩放、自适应画布、格式化、显示比例 */\n\nexport type ToolbarType =\n  | \"save\"\n  | \"fullscreen\"\n  | \"zoom\"\n  | \"adapt\"\n  | \"format\"\n  | \"ratio\"\n  | \"shear\"\n  | \"copy\"\n  | \"paste\"\n  | \"delete\"\n  | \"dragSelect\"\n  | \"layout\"\n  | \"adapt\"\n  | \"group\"\n  | \"preview\";\n\nexport class ToolbarProps {\n  /** 适应画布 */\n  handleShowAll?: () => void;\n\n  /** 缩放 */\n  handleResizeTo?: (scale: number) => void;\n\n  /** 改变屏幕缩放大小 */\n  changeScreenScale?: (scale: number) => void;\n\n  /** 缩放大小 */\n  screenScale?: number;\n\n  onSave?: () => void;\n\n  onShear?: () => void;\n\n  onCopy?: () => void;\n\n  onPaste?: () => void;\n\n  onDelete?: () => void;\n\n  onDragSelect?: () => void;\n\n  onLayout?: () => void;\n\n  onAdapt?: () => void;\n\n  onGroup?: () => void;\n\n  onPreview?: () => void;\n\n  /** 处理全屏 */\n  // handleFullScreen?: () => void;\n  /** Toolbar选项 */\n  items?: ToolbarType[];\n\n  /**  */\n}\n\nconst Toolbar = React.forwardRef((props: ToolbarProps, ref: any) => {\n  const {\n    screenScale,\n    changeScreenScale,\n    handleResizeTo,\n    items,\n    onShear,\n    onCopy,\n    onPaste,\n    onDelete,\n    onDragSelect,\n    onSave,\n    onLayout,\n    onAdapt,\n    onGroup,\n  } = props;\n  const scale = String(Math.round(screenScale));\n\n  /** 是否保存 */\n  const isSave = items.includes(\"save\");\n\n  /** 是否支持全屏 */\n\n  const isFullScreen = items.includes(\"fullscreen\");\n\n  /** 是否支持缩放 */\n  const isZoom = items.includes(\"zoom\");\n\n  /** 是否支持适应画布 */\n  const isAdapt = items.includes(\"adapt\");\n\n  /** 是否支持格式化 */\n  const isFormat = items.includes(\"format\");\n\n  /** 剪切 */\n  const isShear = items.includes(\"shear\");\n  /** 是否支持复制 */\n  const isCopy = items.includes(\"copy\");\n\n  const isPaste = items.includes(\"paste\");\n\n  const isDelete = items.includes(\"delete\");\n\n  const isDragSelect = items.includes(\"dragSelect\");\n\n  const isLayout = items.includes(\"layout\");\n\n  const isGroup = items.includes(\"group\");\n\n  /** 当前是否是全屏状态 */\n\n  const fullscreenStatus = isFull();\n\n  /** 缩放操作 */\n  const handleResize = (isLager?: boolean) => {\n    let value = screenScale;\n    if (isLager) {\n      value = screenScale + 10;\n      if (value > MAX_SCALE) {\n        value = MAX_SCALE;\n      }\n    } else {\n      value = screenScale - 10;\n      if (value < MIN_SCALE) {\n        value = MIN_SCALE;\n      }\n    }\n    handleResizeTo(value / 100);\n    changeScreenScale(value);\n  };\n\n  /** 处理全屏事件 */\n  const handleFullScreen = () => {\n    const isfull = isFull();\n    if (isfull) {\n      exitFullscreen();\n    } else {\n      launchFullscreen(ref.current);\n    }\n  };\n\n  // 渲染按钮\n  const renderButtons = () => {\n    const fullScreenClassName = classNames({\n      fullscreen: !fullscreenStatus,\n      \"fullscreen-exit\": fullscreenStatus\n    });\n\n    return (\n      <>\n        {isZoom && (\n          <>\n            <div className=\"toolbar-btn\">\n              <Tooltip title=\"缩小\">\n                <Icon type=\"zoom-in\" onClick={handleResize.bind(null, true)} />\n              </Tooltip>\n            </div>\n            <div className=\"toolbar-btn\">\n              <Tooltip title=\"放大\">\n                <Icon\n                  type=\"zoom-out\"\n                  onClick={handleResize.bind(null, false)}\n                />\n              </Tooltip>\n            </div>\n          </>\n        )}\n        {isSave && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"保存\">\n              <Icon type=\"save\" onClick={onSave} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isFullScreen && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"全屏\">\n              <Icon type={fullScreenClassName} onClick={handleFullScreen} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isShear && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"剪切\">\n              <Icon type=\"scissor\" onClick={onShear} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isCopy && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"复制\">\n              <Icon type=\"copy\" onClick={onCopy} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isPaste && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"粘贴\">\n              <Icon type=\"snippets\" onClick={onPaste} />\n            </Tooltip>\n          </div>\n        )}\n        {isDelete && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"删除\">\n              <Icon type=\"delete\" onClick={onDelete} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isDragSelect && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"圈选\">\n              <Icon type=\"gateway\" onClick={onDragSelect} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isAdapt && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"适应画布\">\n              <Icon type=\"border-outer\" onClick={onAdapt} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isLayout && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"格式化\">\n              <Icon type=\"layout\" onClick={onLayout} />\n            </Tooltip>\n          </div>\n        )}\n\n        {isGroup && (\n          <div className=\"toolbar-btn\">\n            <Tooltip title=\"成组\">\n              <Icon type=\"block\" onClick={onGroup} />\n            </Tooltip>\n          </div>\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div className=\"toolbar\">\n      <div className=\"toolbar-scale\">{scale}%</div>\n      <div className=\"toolbar-button\">{renderButtons()}</div>\n    </div>\n  );\n});\n\nexport default Toolbar;\n"]},"metadata":{},"sourceType":"module"}