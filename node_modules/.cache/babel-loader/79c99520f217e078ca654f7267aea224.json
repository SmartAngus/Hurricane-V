{"ast":null,"code":"var _jsxFileName = \"/Users/majy/work/bici/code/editor-demo/src/features/editor/components/NodePanel.tsx\";\n\n/**\n * @file 画布侧边栏组件库面板\n * @author perkinJ\n */\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { Collapse } from \"antd\";\nimport { ComponentType, ComponentMap, COMPONENT_CATEGORY } from \"../constants/defines\";\nimport \"./NodePanel.scss\";\nconst {\n  useState,\n  useEffect\n} = React;\nconst Panel = Collapse.Panel;\nexport default function NodePanel(props) {\n  const componnetList = Object.values(ComponentType);\n  const {\n    onDrag,\n    visible = false\n  } = props; // 默认取第一个\n\n  const [collapseKey, setCollapseKey] = useState([componnetList[0]]);\n  const boxClass = classNames(\"nodePanel-box\", {\n    \"nodePanel-box-visible\": visible\n  });\n  /** 处理Collapse展开 */\n\n  const handleCollapseKey = items => {\n    setCollapseKey(items);\n  };\n\n  const handleDrag = item => {\n    if (onDrag) {\n      onDrag(item);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nodePanel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: boxClass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nodePanel-box-collapse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    activeKey: collapseKey,\n    onChange: handleCollapseKey,\n    bordered: true,\n    accordion: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, componnetList.map(item => {\n    const total = COMPONENT_CATEGORY[item].length;\n    return /*#__PURE__*/React.createElement(Panel, {\n      key: item,\n      header: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"collapse-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }\n      }, `${ComponentMap[item]} (${total})`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"components-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    }, COMPONENT_CATEGORY[item].map(child => {\n      const boxItemClass = classNames(\"components-box-item\", {\n        \"components-box-item-disabled no-drop\": child.disabled\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: boxItemClass,\n        key: child.key,\n        draggable: true,\n        onDrag: handleDrag.bind(null, child),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"components-box-item-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 27\n        }\n      }, child.icon));\n    })));\n  })))));\n}","map":{"version":3,"sources":["/Users/majy/work/bici/code/editor-demo/src/features/editor/components/NodePanel.tsx"],"names":["React","classNames","Collapse","ComponentType","ComponentMap","COMPONENT_CATEGORY","useState","useEffect","Panel","NodePanel","props","componnetList","Object","values","onDrag","visible","collapseKey","setCollapseKey","boxClass","handleCollapseKey","items","handleDrag","item","map","total","length","child","boxItemClass","disabled","key","bind","icon"],"mappings":"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","sourcesContent":["/**\n * @file 画布侧边栏组件库面板\n * @author perkinJ\n */\n\nimport * as React from \"react\";\nimport * as _ from \"lodash\";\nimport classNames from \"classnames\";\nimport { Collapse } from \"antd\";\nimport {\n  ComponentType,\n  ComponentMap,\n  COMPONENT_CATEGORY,\n  Node\n} from \"../constants/defines\";\nimport \"./NodePanel.scss\";\n\nconst { useState, useEffect } = React;\nconst Panel = Collapse.Panel;\n\ninterface NodePanelProps {\n  visible?: boolean;\n  onDrag?: (item: Node) => void;\n}\n\nexport default function NodePanel(props: NodePanelProps) {\n  const componnetList = Object.values(ComponentType);\n  const { onDrag, visible = false } = props;\n\n  // 默认取第一个\n  const [collapseKey, setCollapseKey] = useState<string[]>([componnetList[0]]);\n\n  const boxClass = classNames(\"nodePanel-box\", {\n    \"nodePanel-box-visible\": visible\n  });\n\n  /** 处理Collapse展开 */\n  const handleCollapseKey = (items: string[] | string) => {\n    setCollapseKey(items as string[]);\n  };\n\n  const handleDrag = (item: Node) => {\n    if (onDrag) {\n      onDrag(item);\n    }\n  };\n\n  return (\n    <div className=\"nodePanel\">\n      <div className={boxClass}>\n        <div className=\"nodePanel-box-collapse\">\n          <Collapse\n            activeKey={collapseKey}\n            onChange={handleCollapseKey}\n            bordered={true}\n            accordion\n          >\n            {componnetList.map(item => {\n              const total = COMPONENT_CATEGORY[item].length;\n              return (\n                <Panel\n                  key={item}\n                  header={\n                    <div className=\"collapse-title\">{`${\n                      ComponentMap[item]\n                    } (${total})`}</div>\n                  }\n                >\n                  <div className=\"components-box\">\n                    {COMPONENT_CATEGORY[item].map(child => {\n                      const boxItemClass = classNames(\"components-box-item\", {\n                        \"components-box-item-disabled no-drop\": child.disabled\n                      });\n                      return (\n                        <div\n                          className={boxItemClass}\n                          key={child.key}\n                          draggable={true}\n                          onDrag={handleDrag.bind(null, child)}\n                        >\n                          <div className=\"components-box-item-icon\">\n                            {child.icon}\n                          </div>\n                          {/* {child.name} */}\n                        </div>\n                      );\n                    })}\n                  </div>\n                </Panel>\n              );\n            })}\n          </Collapse>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}