{"ast":null,"code":"var _jsxFileName = \"/Users/majy/work/bici/code/editor-demo/src/features/editor/components/Edge.tsx\";\n\n/**\n * @file 通用边组件\n * @author perkinJ\n */\nimport * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { CONNECTOR } from \"../utils/types\";\nimport \"./Edge.scss\";\nexport default function Edge(props) {\n  const {\n    id,\n    style,\n    onContextMenu,\n    onClick,\n    object,\n    lineAppendWidth,\n    path,\n    startArrow,\n    endArrow\n  } = props;\n  const {\n    fill\n  } = style;\n  let markerStart = \"\";\n\n  if (typeof startArrow === \"boolean\") {\n    if (startArrow) {\n      markerStart = \"url(#flow-startArrow)\";\n    }\n  } else if (React.isValidElement(startArrow)) {\n    markerStart = `url(#${startArrow.props.id})`;\n  }\n\n  let endStart = \"\";\n\n  if (typeof endArrow === \"boolean\") {\n    if (startArrow) {\n      endStart = \"url(#flow-startArrow)\";\n    }\n  } else if (React.isValidElement(endArrow)) {\n    endStart = `url(#${endArrow.props.id})`;\n  }\n\n  return /*#__PURE__*/React.createElement(\"g\", {\n    key: `${id}${CONNECTOR}`,\n    className: \"editor-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"defs\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, React.isValidElement(startArrow) ? React.cloneElement(startArrow) : /*#__PURE__*/React.createElement(\"marker\", {\n    id: \"flow-startArrow\",\n    markerWidth: \"10\",\n    markerHeight: \"10\",\n    refX: \"0\",\n    refY: \"2\",\n    orient: \"auto\",\n    markerUnits: \"strokeWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,0 L0,4 L4,2 z\",\n    fill: fill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"defs\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, React.isValidElement(endArrow) ? React.cloneElement(endArrow) : /*#__PURE__*/React.createElement(\"marker\", {\n    id: \"flow-endArrow\",\n    markerWidth: \"10\",\n    markerHeight: \"10\",\n    refX: \"0\",\n    refY: \"2\",\n    orient: \"auto\",\n    markerUnits: \"strokeWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,0 L0,4 L4,2 z\",\n    fill: fill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"path\", {\n    key: id,\n    className: \"editor-link-path\",\n    stroke: _.get(style, \"stroke\", \"\"),\n    strokeWidth: _.get(style, \"strokeWidth\", 0),\n    d: path,\n    markerStart: markerStart,\n    markerEnd: endStart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    key: `${id}-background`,\n    className: \"editor-link-path editor-link-path-background\",\n    style: {\n      strokeWidth: lineAppendWidth\n    },\n    d: path,\n    onContextMenu: onContextMenu,\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, object));\n}","map":{"version":3,"sources":["/Users/majy/work/bici/code/editor-demo/src/features/editor/components/Edge.tsx"],"names":["React","_","CONNECTOR","Edge","props","id","style","onContextMenu","onClick","object","lineAppendWidth","path","startArrow","endArrow","fill","markerStart","isValidElement","endStart","cloneElement","get","strokeWidth"],"mappings":"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","sourcesContent":["/**\n * @file 通用边组件\n * @author perkinJ\n */\nimport * as React from \"react\";\nimport * as _ from \"lodash\";\nimport { CONNECTOR, StyleProps } from \"../utils/types\";\nimport \"./Edge.scss\";\n\nexport interface EdgeProps {\n  /** 元素id，唯一 */\n  id?: string;\n  /** 线条路径 */\n  path?: string;\n  /** 起始端的箭头, 为true时为默认的箭头效果，也可以是一个自定义箭头 */\n  startArrow?: boolean | React.SVGProps<SVGForeignObjectElement>;\n  /** 末尾端的箭头, 为true时为默认的箭头效果，也可以是一个自定义箭头 */\n  endArrow?: boolean | React.SVGProps<SVGForeignObjectElement>;\n  /** 边的击中范围\t */\n  lineAppendWidth?: number;\n  /** 元素样式 */\n  style?: StyleProps;\n  /** 自定义形状 */\n  object?: React.SVGProps<SVGForeignObjectElement>;\n  /** 鼠标点击事件 */\n  onClick?: (event: any) => void;\n  /** 右键事件 */\n  onContextMenu?: (event: any) => void;\n}\n\nexport default function Edge(props: EdgeProps) {\n  const {\n    id,\n    style,\n    onContextMenu,\n    onClick,\n    object,\n    lineAppendWidth,\n    path,\n    startArrow,\n    endArrow\n  } = props;\n  const { fill } = style;\n\n  let markerStart = \"\";\n  if (typeof startArrow === \"boolean\") {\n    if (startArrow) {\n      markerStart = \"url(#flow-startArrow)\";\n    }\n  } else if (React.isValidElement(startArrow)) {\n    markerStart = `url(#${(startArrow.props as any).id})`;\n  }\n\n  let endStart = \"\";\n  if (typeof endArrow === \"boolean\") {\n    if (startArrow) {\n      endStart = \"url(#flow-startArrow)\";\n    }\n  } else if (React.isValidElement(endArrow)) {\n    endStart = `url(#${(endArrow.props as any).id})`;\n  }\n\n  return (\n    <g key={`${id}${CONNECTOR}`} className=\"editor-link\">\n      <defs>\n        {React.isValidElement(startArrow) ? (\n          React.cloneElement(startArrow)\n        ) : (\n          <marker\n            id=\"flow-startArrow\"\n            markerWidth=\"10\"\n            markerHeight=\"10\"\n            refX=\"0\"\n            refY=\"2\"\n            orient=\"auto\"\n            markerUnits=\"strokeWidth\"\n          >\n            <path d=\"M0,0 L0,4 L4,2 z\" fill={fill} />\n          </marker>\n        )}\n      </defs>\n      <defs>\n        {React.isValidElement(endArrow) ? (\n          React.cloneElement(endArrow)\n        ) : (\n          <marker\n            id=\"flow-endArrow\"\n            markerWidth=\"10\"\n            markerHeight=\"10\"\n            refX=\"0\"\n            refY=\"2\"\n            orient=\"auto\"\n            markerUnits=\"strokeWidth\"\n          >\n            <path d=\"M0,0 L0,4 L4,2 z\" fill={fill} />\n          </marker>\n        )}\n      </defs>\n      <path\n        key={id}\n        className=\"editor-link-path\"\n        stroke={_.get(style, \"stroke\", \"\")}\n        strokeWidth={_.get(style, \"strokeWidth\", 0)}\n        d={path}\n        markerStart={markerStart}\n        markerEnd={endStart}\n      />\n      {/** 这里增加一个虚拟背景，增加连线的两边可点击区域，提高用户体验 */}\n      <path\n        key={`${id}-background`}\n        className=\"editor-link-path editor-link-path-background\"\n        style={{ strokeWidth: lineAppendWidth }}\n        d={path}\n        onContextMenu={onContextMenu}\n        onClick={onClick}\n      />\n      <g>{object}</g>\n    </g>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}